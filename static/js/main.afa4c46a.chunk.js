(this["webpackJsonpCalendar-Planner"]=this["webpackJsonpCalendar-Planner"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(7),o=a.n(s),i=(a(13),a(1)),l=a(2),c=a(4),d=a(3),m=a(5),u=(a(14),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).makeDayInput=function(){var e=[];e.push(n.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Day"));for(var t=0;t<7;t++)0!=a.props.grid[a.props.week-1][t]&&e.push(n.a.createElement("option",{value:a.props.grid[a.props.week-1][t]},a.props.grid[a.props.week-1][t]));return n.a.createElement("select",{id:"addCard_day"},e)},a.makeTimeInput=function(){var e=[];e.push(n.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Start Time"));for(var t=0;t<24;t++){var a=t+":00";e.push(n.a.createElement("option",{value:t},a))}return n.a.createElement("select",{id:"addCard_time"},e)},a.makeHeightInput=function(){var e=[];e.push(n.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Length"));for(var t=0;t<24;t++){var a=t;e.push(n.a.createElement("option",{value:t},a))}return n.a.createElement("select",{id:"addCard_height"},e)},a.makeMessageInput=function(){return n.a.createElement("input",{type:"text",id:"addCard_message"})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,this.makeDayInput(),n.a.createElement("br",null),this.makeTimeInput(),n.a.createElement("br",null),this.makeHeightInput(),n.a.createElement("br",null),this.makeMessageInput())}}]),t}(r.Component)),h=JSON.parse(localStorage.getItem("cards"));null==h&&(h=[]);var g=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).incYear=function(){a.setState({year:a.state.year+1,week:1,calGrid:a.getCalendarDates(a.state.year+1,a.state.month)}),a.saveTimeState(a.state.year+1,a.state.month,1)},a.decYear=function(){a.setState({year:a.state.year-1,week:1,calGrid:a.getCalendarDates(a.state.year-1,a.state.month)}),a.saveTimeState(a.state.year-1,a.state.month,1)},a.incMonth=function(){12==a.state.month?(a.setState({year:a.state.year+1,month:1,week:1,calGrid:a.getCalendarDates(a.state.year+1,1)}),a.saveTimeState(a.state.year+1,1,1)):(a.setState({month:a.state.month+1,week:1,calGrid:a.getCalendarDates(a.state.year,a.state.month+1)}),a.saveTimeState(a.state.year,a.state.month+1,1))},a.decMonth=function(){1==a.state.month?(a.setState({year:a.state.year-1,month:12,week:1,calGrid:a.getCalendarDates(a.state.year-1,12)}),a.saveTimeState(a.state.year-1,12,1)):(a.setState({month:a.state.month-1,week:1,calGrid:a.getCalendarDates(a.state.year,a.state.month-1)}),a.saveTimeState(a.state.year,a.state.month-1,1))},a.incWeek=function(){a.state.week<6&&(a.setState({week:a.state.week+1}),a.saveTimeState(a.state.year,a.state.month,a.state.week+1))},a.decWeek=function(){a.state.week>1&&(a.setState({week:a.state.week-1}),a.saveTimeState(a.state.year,a.state.month,a.state.week-1))},a.saveTimeState=function(e,t,a){localStorage.setItem("year",JSON.stringify(e)),localStorage.setItem("month",JSON.stringify(t)),localStorage.setItem("week",JSON.stringify(a))},a.createTimeColumn=function(){for(var e=[],t=0;t<24;t++)e.push(n.a.createElement("div",{class:"outer",className:"box Gray Text"},t+":00"));return n.a.createElement("div",{className:"Column",id:"time_column"},n.a.createElement("div",{className:"box White"}),e)},a.createBoard=function(){console.log(a.state.year+"_"+a.state.month+"_"+a.state.week);var e=[],t=a.placeExistingCards();e.push(a.createTimeColumn());for(var r=0;r<7;r++)a.state.calGrid[a.state.week-1][r]?e.push(a.createColumn(r,t)):e.push(a.createBlankColumn(r));return n.a.createElement("div",{id:"board",className:"Calendar"},e)},a.createBlankColumn=function(e){for(var t=[],r=a.state.dayNames[e],s=0;s<24;s++)t.push(n.a.createElement("div",{className:"clearBox"}));return n.a.createElement("div",{className:"Column",id:e},n.a.createElement("div",{className:"box Gray Text"},r),t)},a.createColumn=function(e,t){for(var r=[],s=a.state.dayNames[e],o=0;o<24;o++)r.push(n.a.createElement("div",{id:"box_"+a.state.year+"_"+a.state.month+"_"+a.state.calGrid[a.state.week-1][e]+"_"+o,class:"outer",className:"box LightGray Text",onDrop:a.drop,onDragOver:a.allowDrop},a.placeValidCards(t,a.state.calGrid[a.state.week-1][e],o)));return n.a.createElement("div",{className:"Column",id:e},n.a.createElement("div",{className:"box Gray Text"},a.state.calGrid[a.state.week-1][e]+" "+s),r)},a.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},a.getMaxDays=function(e,t){return[31,a.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t-1]},a.getCalendarDates=function(e,t){for(var r=[[],[],[],[],[],[]],n=new Date(e+"-"+t+"-1").getDay(),s=1,o=0;o<6;o++)for(var i=0;i<7;i++)1==s&&0==o?r[o][i]=n==i?1:0:s>a.getMaxDays(e,t)?r[o][i]=0:r[o][i]=s,0!=r[o][i]&&s++;return r},a.makeCard=function(e,t,r){return n.a.createElement("div",{id:e,class:"inner",className:"LightSmoothGreen Text card",draggable:"true",style:t,onDragStart:a.drag},r)},a.drag=function(e){e.dataTransfer.setData("text",e.target.id)},a.drop=function(e){e.preventDefault();var t=e.dataTransfer.getData("text"),r=document.getElementById(t);a.isValidMove(e,r)&&(console.log(r),e.target.appendChild(r),r.id="card_"+r.id.split("_")[1]+"_"+e.target.id+"_"+r.id.split("_")[7],a.SaveJSON(e,r),console.log(r.id),a.refreshPage())},a.dropRemove=function(e){e.preventDefault();var t=e.dataTransfer.getData("text"),r=document.getElementById(t);a.removeCard(r.id.split("_")[7]),a.refreshPage()},a.isValidMove=function(e,t){return!!/^box.+$/.test(e.target.id)&&(!!a.checkOntopOfExistingCard(e,t,a.getAllCardsOnBoard())&&!(Number(e.target.id.split("_")[4])+Number(t.id.split("_")[1])>24))},a.checkOntopOfExistingCard=function(e,t,a){for(var r=[[],[],[],[],[],[],[]],n=0;n<a.length;n++)if(t!=a[n])for(var s=a[n].id.split("_"),o=s[1],i=s[3],l=s[4],c=s[5],d=s[6],m=new Date(i+"-"+l+"-"+c).getDay(),u=0;u<o;u++)r[m][Number(d)+Number(u)]=1;var h=e.target.id.split("_"),g=h[1],p=h[2],v=h[3],y=h[4],f=(m=new Date(g+"-"+p+"-"+v).getDay(),t.id.split("_")[1]);for(n=0;n<f;n++)if(1==r[m][Number(y)+Number(n)])return!1;return!0},a.getAllCardsOnBoard=function(){return document.querySelectorAll('[id*="card"]')},a.allowDrop=function(e){e.preventDefault()},a.placeExistingCards=function(){var e=[];return h.map((function(t,r){if(t.year==a.state.year&&t.month==a.state.month&&t.week==a.state.week){var n={height:20*t.length+3*(t.length-2)},s="card_"+t.length+"_box_"+t.year+"_"+t.month+"_"+t.day+"_"+t.start_time+"_"+t.id,o=a.makeCard(s,n,t.message);e.push(o)}})),e},a.placeValidCards=function(e,t,a){for(var r=0;r<e.length;r++){var n=e[r].props.id.split("_");if(n[5]==t&&n[6]==a)return e[r]}},a.SaveJSON=function(e,t){var r=t.id.split("_")[7];h[r].day=e.target.id.split("_")[3],h[r].start_time=e.target.id.split("_")[4],a.saveState()},a.saveState=function(){localStorage.setItem("cards",JSON.stringify(h)),console.log(localStorage.getItem("cards"))},a.addCard=function(){console.log("making card");var e=document.getElementById("addCard_time"),t=document.getElementById("addCard_height"),r=document.getElementById("addCard_message"),n=document.getElementById("addCard_day");if(null!=e&&null!=t&&null!=r&&null!=n){e=Number(e.value),t=Number(t.value),r=r.value,n=n.value;var s=0;0!=h.length&&(s=h[h.length-1].id+1);var o={id:s,year:a.state.year,month:a.state.month,day:n,week:a.state.week,start_time:e,length:t,message:r};h.push(o),a.saveState(),a.refreshPage()}else console.log("error")},a.removeCard=function(e){h.splice(e,1),a.recomputeJSONIdTags(),a.refreshPage()},a.recomputeJSONIdTags=function(){for(var e=0;e<h.length;e++)h[e].id=e;a.saveState()},a.refreshPage=function(){window.location.reload()};var r=new Date,s=JSON.parse(localStorage.getItem("year")),o=JSON.parse(localStorage.getItem("month")),l=JSON.parse(localStorage.getItem("week"));return console.log(s+"+"+o+"+"+l),s=null==s?r.getFullYear():Number(s),o=null==o?r.getMonth()+1:Number(o),l=null==l?1:Number(l),a.state={year:s,month:o,week:l,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],calGrid:a.getCalendarDates(s,o)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App",id:"app"},n.a.createElement("meta",{name:"viewport",content:"width=device-width, user-scalable=no"}),n.a.createElement("header",{className:"header MainText"},"HOME"),n.a.createElement("body",{className:"body"},n.a.createElement("div",{className:"Center MainText"},n.a.createElement("button",{onClick:this.decYear,id:"decYearButton",className:"decButton"},"<"),this.state.year,n.a.createElement("button",{onClick:this.incYear,id:"incYearButton",className:"incButton"},">")),n.a.createElement("div",{className:"Center MainText"},n.a.createElement("button",{onClick:this.decMonth,id:"decMonthButton",className:"decButton"},"<"),this.state.monthNames[this.state.month-1],n.a.createElement("button",{onClick:this.incMonth,id:"incMonthButton",className:"incButton"},">")),n.a.createElement("div",{className:"Center MainText"},n.a.createElement("button",{onClick:this.decWeek,id:"decWeekButton",className:"decButton"},"<"),"Week "+this.state.week,n.a.createElement("button",{onClick:this.incWeek,id:"incWeekButton",className:"incButton"},">")),n.a.createElement("div",{id:"board_wrapper",className:"Center"},this.createBoard()),n.a.createElement("div",{id:"addCard",className:"addCard"},n.a.createElement(u,{grid:this.state.calGrid,week:this.state.week}),n.a.createElement("button",{onClick:this.addCard},"Add a new card!")),n.a.createElement("img",{src:"bin-icon.png",className:"bin",onDrop:this.dropRemove,onDragOver:this.allowDrop})))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){e.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.afa4c46a.chunk.js.map